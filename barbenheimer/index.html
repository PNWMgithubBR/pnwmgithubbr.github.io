<html>
<head>
  <title>Voto Barbenheimer</title>
</head>
<body>
  Beta
  <img id="imagemVoto" src="tadl.png" width="500px" height="300px">
  <h1>Contagem de Votos</h1>
  <h2 style="color: rgb(255, 88, 191);">Barbie: <span id="barbieVotes">0</span></h2>
  <h2>Oppenheimer: <span id="oppenheimerVotes">0</span></h2>
  <h2>Barbenheimer (Os 2): <span id="sameVotes">0</span></h2>
  
  <button id="barbieButton" onclick="atualizarVoto('barbieVotes', 'barbieButton')">Votar em Barbie</button>
  <button id="oppenheimerButton" onclick="atualizarVoto('oppenheimerVotes', 'oppenheimerButton')">Votar em Oppenheimer</button>
  <button id="sameButton" onclick="atualizarVoto('sameVotes', 'sameButton')">Votar nos 2</button>

  <br>

  <b>Preste MUITA atenção na hora de votar<b>
  
  <script>
    // o botão de reset é existente na versão secreta reserva
    function atualizarVoto(elementId, buttonId) {
      var votesElement = document.getElementById(elementId);
      var currentVotes = parseInt(votesElement.innerText);
      var newVotes = currentVotes + 1;
      votesElement.innerText = newVotes;

      // Salvar a contagem de votos no armazenamento local do navegador
      localStorage.setItem(elementId, newVotes);

      console.log('Voto atualizado com sucesso!');

      // Desabilitar todos os botões de voto
      var buttons = document.getElementsByTagName('button');
      for (var i = 0; i < buttons.length; i++) {
        buttons[i].disabled = true;
      }

      // Habilitar apenas o botão de reset
      var resetButton = document.getElementById('resetButton');
      resetButton.disabled = false;

      // Alterar a imagem quando o voto for salvo
      var imagemVoto = document.getElementById('imagemVoto');
      if (elementId === 'barbieVotes') {
        imagemVoto.src = 'barbietadl.png';
      } else if (elementId === 'oppenheimerVotes') {
        imagemVoto.src = 'oppentadl.png';
      } else {
        imagemVoto.src = 'barbentadl.png';
      }
    }

    function resetarVotos() {
      // Reiniciar as contagens de votos para zero
      document.getElementById('barbieVotes').innerText = '0';
      document.getElementById('oppenheimerVotes').innerText = '0';
      document.getElementById('sameVotes').innerText = '0';

      // Limpar o armazenamento local
      localStorage.clear();

      // Habilitar todos os botões de voto
      var buttons = document.getElementsByTagName('button');
      for (var i = 0; i < buttons.length; i++) {
        buttons[i].disabled = false;
      }

      // Restaurar a imagem padrão
      var imagemVoto = document.getElementById('imagemVoto');
      imagemVoto.src = 'tadl.png';

      console.log('Votos resetados com sucesso!');
    }

    // Recuperar a contagem de votos do armazenamento local ao carregar a página
    window.onload = function() {
      var barbieVotes = localStorage.getItem('barbieVotes');
      var oppenheimerVotes = localStorage.getItem('oppenheimerVotes');
      var sameVotes = localStorage.getItem('sameVotes');

      if (barbieVotes !== null) {
        document.getElementById('barbieVotes').innerText = barbieVotes;
        imagemVoto.src = 'barbietadl.png';
      }

      if (oppenheimerVotes !== null) {
        document.getElementById('oppenheimerVotes').innerText = oppenheimerVotes;
        imagemVoto.src = 'oppentadl.png';
      }

      if (sameVotes !== null) {
        document.getElementById('sameVotes').innerText = sameVotes;
        imagemVoto.src = 'barbentadl.png';
      }

      // Verificar se o voto de Barbie já foi registrado e desabilitar o botão correspondente
      var barbieButton = document.getElementById('barbieButton');
      if (localStorage.getItem('barbieVotes') !== null) {
        barbieButton.disabled = true;
      }

      // Verificar se o voto de Oppenheimer já foi registrado e desabilitar o botão correspondente
      var oppenheimerButton = document.getElementById('oppenheimerButton');
      if (localStorage.getItem('oppenheimerVotes') !== null) {
        oppenheimerButton.disabled = true;
      }

      // Verificar se o voto de Barbenheimer já foi registrado e desabilitar o botão correspondente
      var sameButton = document.getElementById('sameButton');
      if (localStorage.getItem('sameVotes') !== null) {
        sameButton.disabled = true;
      }
      
      // Desabilitar os botões de voto, exceto o botão de reset, se houver votos registrados
      var resetButton = document.getElementById('resetButton');
      if (localStorage.getItem('barbieVotes') !== null ||
          localStorage.getItem('oppenheimerVotes') !== null ||
          localStorage.getItem('sameVotes') !== null) {
        barbieButton.disabled = true;
        oppenheimerButton.disabled = true;
        sameButton.disabled = true;
      } else {
        resetButton.disabled = true;
      }
    };
  </script>
</body>
</html>
